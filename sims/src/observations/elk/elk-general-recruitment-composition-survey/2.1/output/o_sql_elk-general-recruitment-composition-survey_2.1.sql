SET search_path to 'biohub';
SET SCHEMA 'biohub';

DO $$
    DECLARE
        _template_id integer; -- set after template is created
        _template_name varchar := 'Elk Aerial General Recruitment Composition Survey';
        _template_version varchar := '2.0';
        _template_description varchar := 'Elk Aerial General Recruitment Composition Survey';
        _field_method_name varchar := null;

        _taxonomy_ids integer[] := array[35370,35371]; -- wild taxonomic IDs from elastic search
        _taxonomy_id integer; -- used as an index in the loop, do not set
        _validation_config varchar := $v_s${"files":[{"name":"Effort & Site Conditions","validations":[{"file_duplicate_columns_validator":{}},{"file_required_columns_validator":{"required_columns":["Study Area","Population Unit","Block ID/SU ID","Block/Population Unit Area (km2)","Date","Start Time 1 (24hrs)","End Time 1 (24hrs)","Start Time 2 (24hrs)","End Time 2 (24hrs)","Start Time 3 (24hrs)","End Time 3 (24hrs)","Total Block Time","Total Time (hours)","Total Time (mins)","Time (mins)/block area (km2)","Aircraft Company","Aircraft Type","Pilot","Navigator","Rear Left Observer","Rear Right Observer","Air Temperature (C)","Visibility","Cloud Cover (%)","Wind Speed","Precipitation","Light","Snow Cover","Snow Depth","Days Since Snowfall","Weather Description","Habitat Description","Effort & Site Comments"]}},{"file_column_unique_validator":{"column_names":["Study Area","Population Unit","Block ID/SU ID","Date","Start Time 1 (24hrs)"]}}],"columns":[{"name":"Aircraft Type","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"Bell JetRanger","description":"Bell JetRanger"},{"name":"Bell JetRanger without bubble window","description":"Bell JetRanger without bubble window"},{"name":"Bell JetRanger with bubble window","description":"Bell JetRanger with bubble window"},{"name":"Bell LongRanger","description":"Bell LongRanger"},{"name":"Hiller 12E4","description":"Hiller 12E4"},{"name":"Hughes 500D","description":"Hughes 500D"},{"name":"Cessna 172","description":"Cessna 172"},{"name":"Cessna 180","description":"Cessna 180"},{"name":"Cessna 182","description":"Cessna 182"},{"name":"Cessna 185","description":"Cessna 185"},{"name":"Cessna 206","description":"Cessna 206"},{"name":"Super Cub","description":"Super Cub"},{"name":"Beaver","description":"Beaver"},{"name":"Single Otter","description":"Single Otter"},{"name":"Twin Otter","description":"Twin Otter"},{"name":"Bell 406","description":"Bell 406"},{"name":"A-Star","description":"A-Star"}]}}]}]},{"name":"Observations","validations":[{"file_duplicate_columns_validator":{}},{"file_required_columns_validator":{"required_columns":["Study Area","Population Unit","Block ID/SU ID","UTM Zone","Easting","Northing","Datum","Lat (DD)","Long (DD)","Species","Group Label","Date","Time","BC RISC Yearling Bulls","BC RISC Class I Bulls","BC RISC Class II Bulls","BC RISC Class III Bulls","BC RISC Class IV Bulls","Spike Bulls","Raghorn Bulls","<=3 Point Bulls","3 - 4 Point Bulls","3 - 5 Point Bulls","<4 Point Bulls",">=4 Point Bulls","5 Point Bulls",">=5 Point Bulls",">= 6 Point Bulls","Adult Bulls - Unclassified","Unclassified Bulls","Cows","Calves","Adult Unclassified Sex","Yearling - Unclassified Sex","Unclassified Age/Sex","Total Count","Sign Type","Sign Count","Age of Sign","Topography","Habitat","Veg Cover (%)","Snow Cover (%)","Activity","Number of Marked Animals Observed","Survey or Telemetry Search","Photos","Observation Comments"]}},{"file_column_unique_validator":{"column_names":["Group Label"]}}],"columns":[{"name":"Date","validations":[{"column_required_validator":{}}]},{"name":"UTM Zone","validations":[{"column_format_validator":{"reg_exp":"^([7-9]|1[0-1])$","reg_exp_flags":"g","expected_format":"UTM Zone must be a number between 7 and 11."}}]},{"name":"Easting","validations":[{"column_format_validator":{"reg_exp":"^[1-9][0-9][0-9][0-9][0-9][0-9](?:\\.\\d+)?$","reg_exp_flags":"g","expected_format":"Easting needs to be a 6 digit number."}}]},{"name":"Northing","validations":[{"column_format_validator":{"reg_exp":"^[1-9][0-9][0-9][0-9][0-9][0-9][0-9](?:\\.\\d+)?$","reg_exp_flags":"g","expected_format":"Northing needs to be a 7 digit number."}}]},{"name":"Datum","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"NAD83","description":"NAD83"},{"name":"NAD27","description":"NAD27"},{"name":"WGS84","description":"WGS84"}]}}]},{"name":"Lat (DD)","validations":[{"column_numeric_validator":{}}]},{"name":"Long (DD)","validations":[{"column_numeric_validator":{}}]},{"name":"Species","validations":[{"column_required_validator":{}},{"column_code_validator":{"allowed_code_values":[{"name":"M-CEEL","description":"M-CEEL"},{"name":"M-CEEL-RO","description":"M-CEEL-RO"}]}}]},{"name":"BC RISC Yearling Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"BC RISC Class I Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"BC RISC Class II Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"BC RISC Class III Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"BC RISC Class IV Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"Spike Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"Raghorn Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"<=3 Point Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"3 - 4 Point Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"3 - 5 Point Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"<4 Point Bulls","validations":[{"column_numeric_validator":{}}]},{"name":">=4 Point Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"5 Point Bulls","validations":[{"column_numeric_validator":{}}]},{"name":">=5 Point Bulls","validations":[{"column_numeric_validator":{}}]},{"name":">= 6 Point Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"Adult Bulls - Unclassified","validations":[{"column_numeric_validator":{}}]},{"name":"Unclassified Bulls","validations":[{"column_numeric_validator":{}}]},{"name":"Cows","validations":[{"column_numeric_validator":{}}]},{"name":"Calves","validations":[{"column_numeric_validator":{}}]},{"name":"Adult Unclassified Sex","validations":[{"column_numeric_validator":{}}]},{"name":"Yearling - Unclassified Sex","validations":[{"column_numeric_validator":{}}]},{"name":"Unclassified Age/Sex","validations":[{"column_numeric_validator":{}}]},{"name":"Sign Type","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"Antler","description":"Antler"},{"name":"Bed","description":"Bed"},{"name":"Body Parts","description":"Body Parts"},{"name":"Trail","description":"Trail"},{"name":"Tracks","description":"Tracks"},{"name":"Carcass","description":"Carcass"},{"name":"Scratchings","description":"Scratchings"},{"name":"Hair","description":"Hair"},{"name":"Excrement","description":"Excrement"},{"name":"Cache","description":"Cache"},{"name":"Egg Shell","description":"Egg Shell"},{"name":"Feeding","description":"Feeding"},{"name":"Feather","description":"Feather"},{"name":"Pellet Group","description":"Pellet Group"},{"name":"Regurgitated Pellet","description":"Regurgitated Pellet"},{"name":"Shed Skin","description":"Shed Skin"},{"name":"Whitewash","description":"Whitewash"},{"name":"Described in Comments","description":"Pellet Group"}]}}]},{"name":"Sign Count","validations":[{"column_numeric_validator":{}}]},{"name":"Age of Sign","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"New","description":"New"},{"name":"Old","description":"Old"},{"name":"Hour","description":"Hour"},{"name":"Day","description":"Day"},{"name":"Week","description":"Week"},{"name":"Month","description":"Month"},{"name":"Year","description":"Year"},{"name":"Unclassified","description":"Unclassified"},{"name":"Described in Comments","description":"Described in Comments"}]}}]},{"name":"Veg Cover (%)","validations":[{"column_numeric_validator":{}}]},{"name":"Snow Cover (%)","validations":[{"column_numeric_validator":{}}]},{"name":"Activity","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"Standing","description":"Standing"},{"name":"Bedding","description":"Bedding"},{"name":"Running","description":"Running"},{"name":"Walking","description":"Walking"},{"name":"Moving","description":"Moving"},{"name":"Not Moving","description":"Not Moving"}]}}]},{"name":"Number of Marked Animals Observed","validations":[{"column_numeric_validator":{}}]},{"name":"Survey or Telemetry Search","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"Survey","description":"Survey"},{"name":"Telemetry","description":"Telemetry"}]}}]}]},{"name":"Marked Animals","validations":[{"file_duplicate_columns_validator":{}},{"file_required_columns_validator":{"required_columns":["Group Label","Date","Targeted or Non-Targeted","Wildlife Health ID","Animal ID","Telemetry Device ID","Collar/Tag Frequency","Frequency Unit","Right Ear Tag ID","Right Ear Tag Colour","Left Ear Tag ID","Left Ear Tag Colour","Marked Animals Comments"]}},{"file_column_unique_validator":{"column_names":["Wildlife Health ID","Animal ID","Telemetry Device ID"]}}],"columns":[{"name":"Group Label","validations":[{"column_required_validator":{}}]},{"name":"Targeted or Non-Targeted","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"Targeted","description":"Targeted"},{"name":"Non-Targeted","description":"Non-Targeted"}]}}]},{"name":"Frequency Unit","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"KHz","description":"KHz"},{"name":"MHz","description":"MHz"},{"name":"Hz","description":"Hz"}]}}]}]},{"name":"Incidental Observations","validations":[{"file_duplicate_columns_validator":{}},{"file_required_columns_validator":{"required_columns":["Study Area","Block ID/SU ID","Date","Time","UTM Zone","Easting","Northing","Datum","Lat (DD)","Long (DD)","Species","Adult Males","Adult Females","Adults - Unclassified Sex","Juvenile Males","Juvenile Females","Juveniles - Unclassified Sex","Unknown Age/Sex","Total Count","Species Occurrence Status","Activity","Activity Count","Feature Type","Feature Type Count","Sign Type","Sign Count","Photos","Incidental Observation Comments"]}}],"columns":[{"name":"UTM Zone","validations":[{"column_format_validator":{"reg_exp":"^([7-9]|1[0-1])$","reg_exp_flags":"g","expected_format":"UTM Zone must be a number between 7 and 11."}}]},{"name":"Easting","validations":[{"column_format_validator":{"reg_exp":"^[1-9][0-9][0-9][0-9][0-9][0-9](?:\\.\\d+)?$","reg_exp_flags":"g","expected_format":"Easting needs to be a 6 digit number."}}]},{"name":"Northing","validations":[{"column_format_validator":{"reg_exp":"^[1-9][0-9][0-9][0-9][0-9][0-9][0-9](?:\\.\\d+)?$","reg_exp_flags":"g","expected_format":"Northing needs to be a 7 digit number."}}]},{"name":"Datum","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"NAD83","description":"NAD83"},{"name":"NAD27","description":"NAD27"},{"name":"WGS84","description":"WGS84"}]}}]},{"name":"Lat (DD)","validations":[{"column_numeric_validator":{}}]},{"name":"Long (DD)","validations":[{"column_numeric_validator":{}}]},{"name":"Adult Males","validations":[{"column_numeric_validator":{}}]},{"name":"Adult Females","validations":[{"column_numeric_validator":{}}]},{"name":"Adults - Unclassified Sex","validations":[{"column_numeric_validator":{}}]},{"name":"Juvenile Males","validations":[{"column_numeric_validator":{}}]},{"name":"Juvenile Females","validations":[{"column_numeric_validator":{}}]},{"name":"Juveniles - Unclassified Sex","validations":[{"column_numeric_validator":{}}]},{"name":"Unknown Age/Sex","validations":[{"column_numeric_validator":{}}]},{"name":"Species Occurrence Status","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"Present","description":"Present"},{"name":"Absent","description":"Absent"}]}}]},{"name":"Activity","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"Alert","description":"Alert"},{"name":"Avoiding Pests","description":"Avoiding Pests"},{"name":"Basking","description":"Basking"},{"name":"Bedding","description":"Bedding"},{"name":"Building","description":"Building"},{"name":"Cashing","description":"Cashing"},{"name":"Casting","description":"Casting"},{"name":"Courting","description":"Courting"},{"name":"Denning","description":"Denning"},{"name":"Disturbed","description":"Disturbed"},{"name":"Drinking","description":"Drinking"},{"name":"Excreting","description":"Excreting"},{"name":"Feeding","description":"Feeding"},{"name":"Fleeing","description":"Fleeing"},{"name":"Feeding salmonid","description":"Feeding salmonid"},{"name":"Grooming","description":"Grooming"},{"name":"Habitat","description":"Habitat"},{"name":"Hibernating","description":"Hibernating"},{"name":"Hunting","description":"Building"},{"name":"Ingesting Minerals","description":"Ingesting Minerals"},{"name":"Incubating","description":"Incubating"},{"name":"Living","description":"Living"},{"name":"Migrating Daily","description":"Migrating Daily"},{"name":"Migrating Seasonally","description":"Migrating Seasonally"},{"name":"Reproducing birthing","description":"Reproducing birthing"},{"name":"Reproducing eggs","description":"Reproducing eggs"},{"name":"Rearing","description":"Rearing"},{"name":"Standing","description":"Standing"},{"name":"Security and/or Thermal","description":"Security and/or Thermal"},{"name":"Thermal","description":"Thermal"},{"name":"Territoriality","description":"Territoriality"},{"name":"Not Traveling","description":"Not Traveling"},{"name":"Traveling, Flying","description":"Traveling flying"},{"name":"Traveling, Unclassified","description":"Traveling, Unclassified"},{"name":"Traveling, Walking","description":"Traveling, Walking"},{"name":"Traveling on a Path","description":"Traveling on a Path"},{"name":"Traveling, Running","description":"Traveling running"},{"name":"Traveling, Swimming","description":"Traveling, Swimming"},{"name":"Traveling, Heli-Skiing","description":"Traveling, Heli-Skiing"},{"name":"Traveling, Skiing","description":"Traveling, Skiing"},{"name":"Traveling, Snowmobiling","description":"Traveling, Snowmobiling"},{"name":"Traveling, Snowshoeing","description":"Traveling, Snowshoeing"},{"name":"Traveling, Snow Cat","description":"Traveling, Snow Cat"},{"name":"Urinating","description":"Urinating"},{"name":"Described in comments","description":"Described in comments"}]}}]},{"name":"Activity Count","validations":[{"column_numeric_validator":{}}]},{"name":"Feature Type","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"Breeding Site","description":"Breeding Site"},{"name":"Maternity Roost","description":"Maternity Roost"},{"name":"Bat Nursery Roost","description":"Bat Nursery Roost"},{"name":"Rookery","description":"Rookery"},{"name":"Courting Site","description":"Courting Site"},{"name":"Feeding Site","description":"Feeding Site"},{"name":"Resting Site","description":"Resting Site"},{"name":"Staging Site","description":"Staging Site"},{"name":"Ungulate Winter Range","description":"Ungulate Winter Range"},{"name":"Hibernaculum","description":"Hibernaculum"},{"name":"Roost","description":"Roost"},{"name":"Wallow","description":"Wallow"},{"name":"Mineral Lick","description":"Mineral Lick"},{"name":"Burrow","description":"Burrow"},{"name":"Den","description":"Den"},{"name":"Lodge","description":"Lodge"},{"name":"Nest","description":"Nest"},{"name":"Nest Tree","description":"Nest Tree"},{"name":"Plant Community","description":"Plant Community"},{"name":"Plant Site","description":"Plant Site"},{"name":"Hot Spring","description":"Hot Spring"},{"name":"Water","description":"Water"},{"name":"Fisheries Sensitive Feature","description":"Fisheries Sensitive Feature"},{"name":"Marine Sensitive Feature","description":"Marine Sensitive Feature"},{"name":"Described in Comments","description":"Pellet Group"}]}}]},{"name":"Feature Type Count","validations":[{"column_numeric_validator":{}}]},{"name":"Sign Type","validations":[{"column_code_validator":{"allowed_code_values":[{"name":"Antler","description":"Antler"},{"name":"Bed","description":"Bed"},{"name":"Body Parts","description":"Body Parts"},{"name":"Trail","description":"Trail"},{"name":"Tracks","description":"Tracks"},{"name":"Carcass","description":"Carcass"},{"name":"Scratchings","description":"Scratchings"},{"name":"Hair","description":"Hair"},{"name":"Excrement","description":"Excrement"},{"name":"Cache","description":"Cache"},{"name":"Egg Shell","description":"Egg Shell"},{"name":"Feeding","description":"Feeding"},{"name":"Feather","description":"Feather"},{"name":"Pellet Group","description":"Pellet Group"},{"name":"Regurgitated Pellet","description":"Regurgitated Pellet"},{"name":"Shed Skin","description":"Shed Skin"},{"name":"Whitewash","description":"Whitewash"},{"name":"Described in Comments","description":"Pellet Group"}]}}]},{"name":"Sign Count","validations":[{"column_numeric_validator":{}}]}]}],"validations":[{"submission_required_files_validator":{"required_files":["Effort & Site Conditions","Observations","Marked Animals","Incidental Observations"]}}],"workbookValidations":[{"workbook_parent_child_key_match_validator":{"child_worksheet_name":"Marked Animals","parent_worksheet_name":"Observations","column_names":["Group Label"]}}]}$v_s$;
        _transformation_config varchar := $t_s${"templateMeta":[{"sheetName":"Observations","primaryKey":["Study Area","Population Unit","Block ID/SU ID"],"parentKey":[],"type":"root","foreignKeys":[{"sheetName":"Marked Animals","primaryKey":["Group Label"]}]},{"sheetName":"Marked Animals","primaryKey":["Wildlife Health ID","Animal ID","Telemetry Device ID"],"parentKey":["Group Label"],"type":"","foreignKeys":[]}],"map":[{"sheetName":"event","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"eventDate","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Date']"]}]},{"columnName":"eventTime","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Time']"]}]},{"columnName":"eventRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]},{"columnName":"basisOfRecord","columnValue":[{"static":"HumanObservation"}]}]},{"sheetName":"location","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['_key']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"verbatimCoordinates","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['UTM Zone,Easting,Northing']"],"join":" "},{"paths":["$..[?(@._name === 'Observations')]..['Lat (DD),Long (DD)']"],"join":" "}]},{"columnName":"decimalLatitude","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Lat (DD)']"]}]},{"columnName":"decimalLongitude","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Long (DD)']"]}]},{"columnName":"verbatimSRS","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Datum']"]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['BC RISC Yearling Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":0}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['BC RISC Yearling Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"yearling"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"0:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":0}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"BC RISC Yearling Bulls"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['BC RISC Class I Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":1}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['BC RISC Class I Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"1:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":1}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"BC RISC Class I"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['BC RISC Class I Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":2}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['BC RISC Class II Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"2:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":2}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"BC RISC Class II"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['BC RISC Class III Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":3}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['BC RISC Class III Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"3:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":3}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"BC RISC Class III"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['BC RISC Class IV Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":4}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['BC RISC Class IV Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"4:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":4}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"BC RISC Class IV"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Spike Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":5}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Spike Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"5:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":5}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"Spike antlers"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Raghorn Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":6}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Raghorn Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"6:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":6}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"Raghorn antlers"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['<=3 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":7}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['<=3 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"7:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":7}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"3 points or fewer"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['3 - 4 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":8}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['3 - 4 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"8:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":8}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"3 or 4 points"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['3 - 5 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":9}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['3 - 5 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"9:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":9}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"3 or 4 or 5 points"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['<4 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":10}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['<4 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"10:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":10}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"fewer than 4 points"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['>=4 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":11}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['>=4 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"11:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":11}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"4 points or more"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['5 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":12}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['5 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"12:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":12}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"5 points"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['>=5 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":13}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['>=5 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"13:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":13}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"5 points or more"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['>= 6 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":14}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['>= 6 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"14:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":14}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"6 points or more"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Adult Bulls - Unclassified']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":15}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Adult Bulls - Unclassified']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"15:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":15}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"unclassified"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Unclassified Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":16}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Unclassified Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"16:antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":16}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementValue","columnValue":[{"static":"unclassified"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Cows']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":17}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Cows']"]}]},{"columnName":"sex","columnValue":[{"static":"female"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Calves']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":18}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Calves']"]}]},{"columnName":"sex","columnValue":[{"static":"unknown"}]},{"columnName":"lifeStage","columnValue":[{"static":"juvenile"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Adult Unclassified Sex']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":19}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Adult Unclassified Sex']"]}]},{"columnName":"sex","columnValue":[{"static":"unknown"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Yearling - Unclassified Sex']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":20}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Yearling - Unclassified Sex']"]}]},{"columnName":"sex","columnValue":[{"static":"unknown"}]},{"columnName":"lifeStage","columnValue":[{"static":"yearling"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Unclassified Age/Sex']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"21"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Unclassified Age/Sex']"]}]},{"columnName":"sex","columnValue":[{"static":"unknown"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]}]},{"sheetName":"organism","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Marked Animals')]..['Wildlife Health ID,Animal ID,Telemetry Device ID']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"organismID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"]}]},{"columnName":"organismRemarks","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Marked Animals Comments']"]}]}]},{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"block-id/su-id"}}]},{"columnName":"measurementType","columnValue":[{"static":"Block ID/SU ID"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Block ID/SU ID']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"population-unit"}}]},{"columnName":"measurementType","columnValue":[{"static":"Population Unit"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Population Unit']"]}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Group Label']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"group-label"}}]},{"columnName":"measurementType","columnValue":[{"static":"Group Label"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Group Label']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"or","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Sign Type']"},{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Sign Count']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"sign-type"}}]},{"columnName":"measurementType","columnValue":[{"static":"Sign Type"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Sign Type']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"or","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Sign Count']"},{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Sign Type']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"sign-count"}}]},{"columnName":"measurementType","columnValue":[{"static":"Sign Count"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Sign Count']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Age of Sign']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"age-of-sign"}}]},{"columnName":"measurementType","columnValue":[{"static":"Age of Sign"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Age of Sign']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Topography']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"topography"}}]},{"columnName":"measurementType","columnValue":[{"static":"Topography"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Topography']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Habitat']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"habitat"}}]},{"columnName":"measurementType","columnValue":[{"static":"Habitat"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Habitat']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Veg Cover (%)']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"veg-cover"}}]},{"columnName":"measurementType","columnValue":[{"static":"Veg Cover"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Veg Cover (%)']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":"%"}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Snow Cover (%)']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"snow-cover"}}]},{"columnName":"measurementType","columnValue":[{"static":"Snow Cover"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Snow Cover (%)']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":"%"}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Activity']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"activity"}}]},{"columnName":"measurementType","columnValue":[{"static":"Activity"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Activity']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Number of Marked Animals Observed']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"number-of-marked-animals-observed"}}]},{"columnName":"measurementType","columnValue":[{"static":"Number of Marked Animals Observed"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Number of Marked Animals Observed']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Survey or Telemetry Search']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"survey-or-telemetry-search"}}]},{"columnName":"measurementType","columnValue":[{"static":"Survey or Telemetry Search"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Survey or Telemetry Search']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Photos']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"photos"}}]},{"columnName":"measurementType","columnValue":[{"static":"Photos"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Photos']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Marked Animals')]..['Targeted or Non-Targeted']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"targeted-or-non-targeted"}}]},{"columnName":"organismID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"]}]},{"columnName":"measurementType","columnValue":[{"static":"Targeted or Non-Targeted"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Targeted or Non-Targeted']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Marked Animals')]..['Wildlife Health ID']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"wildlife-health-id"}}]},{"columnName":"organismID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"]}]},{"columnName":"measurementType","columnValue":[{"static":"Wildlife Health ID"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Wildlife Health ID']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Marked Animals')]..['Animal ID']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"animal-id"}}]},{"columnName":"organismID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"]}]},{"columnName":"measurementType","columnValue":[{"static":"Animal ID"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Animal ID']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Marked Animals')]..['Telemetry Device ID']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"telemetry-device-id"}}]},{"columnName":"organismID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"]}]},{"columnName":"measurementType","columnValue":[{"static":"Telemetry Device ID"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Telemetry Device ID']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Marked Animals')]..['Collar/Tag Frequency']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"collar/tag-frequency"}}]},{"columnName":"organismID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"]}]},{"columnName":"measurementType","columnValue":[{"static":"Collar/Tag Frequency"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Collar/Tag Frequency']"]}]},{"columnName":"measurementUnit","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Frequency Unit']"]}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Marked Animals')]..['Right Ear Tag ID']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"right-ear-tag-id"}}]},{"columnName":"organismID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"right-ear-tag-id"}}]},{"columnName":"measurementType","columnValue":[{"static":"Right Ear Tag ID"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Right Ear Tag ID']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Marked Animals')]..['Right Ear Tag Colour']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"right-ear-tag-colour"}}]},{"columnName":"organismID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"]}]},{"columnName":"measurementType","columnValue":[{"static":"Right Ear Tag Colour"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Right Ear Tag Colour']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Marked Animals')]..['Left Ear Tag ID']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"left-ear-tag-id"}}]},{"columnName":"organismID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"]}]},{"columnName":"measurementType","columnValue":[{"static":"Left Ear Tag ID"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Left Ear Tag ID']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]},{"sheetName":"measurementOrFact","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Marked Animals')]..['Left Ear Tag Colour']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"],"postfix":{"static":"left-ear-tag-colour"}}]},{"columnName":"organismID","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['_key']","$..[?(@._name === 'Marked Animals')]..['_row']"]}]},{"columnName":"measurementType","columnValue":[{"static":"Left Ear Tag Colour"}]},{"columnName":"measurementValue","columnValue":[{"paths":["$..[?(@._name === 'Marked Animals')]..['Left Ear Tag Colour']"]}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]}]}],"dwcMeta":[{"sheetName":"event","primaryKey":["eventID"]},{"sheetName":"location","primaryKey":["eventID"]},{"sheetName":"occurrence","primaryKey":["occurrenceID"]},{"sheetName":"organism","primaryKey":["organismID"]},{"sheetName":"measurementOrFact","primaryKey":["eventID","measurementID","occurrenceID","organismID"]}]}$t_s$;
    BEGIN
        -- Insert template record, if one does not already exist
        INSERT INTO template (
            name,
            version,
            record_effective_date,
            description
        ) 
        VALUES (
            _template_name,
            _template_version,
            now(),
            _template_description
        )
        ON CONFLICT DO NOTHING;
    
        -- Get template id
        SELECT 
            template_id INTO _template_id 
        FROM 
            template t 
        WHERE 
            "name" = _template_name 
        AND 
            "version" = _template_version;
    
        -- Upsert record for each taxonomy id
        FOREACH _taxonomy_id IN ARRAY _taxonomy_ids LOOP
            INSERT INTO
                template_methodology_species (
                    wldtaxonomic_units_id,
                    template_id,
                    validation,
                    transform
                )
                VALUES (
                    _taxonomy_id,
                    _template_id,
                    _validation_config::json,
                    _transformation_config::json
                )
            ON CONFLICT (
                wldtaxonomic_units_id,
                template_id
            ) 
            DO UPDATE SET
                validation = _validation_config::json,
                transform = _transformation_config::json;
        END LOOP;

        RAISE NOTICE 'All done!';
END $$;